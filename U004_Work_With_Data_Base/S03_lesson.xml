<?xml version='1.0' encoding='UTF-8'?>
<slide xmlns="https://ulearn.me/schema/v2" title="Добавление кода" id="682b9f77-05ab-4d24-8414-39f2774c3535">
    <markdown>
        Отрефакторим наш код с видами кофе, чтобы добавить новые возможности работы с базой
        данных. Начнем с класса(ов) предметной области, в данном случае `Coffee`.
        #### Аннотация `@Entity`
        H2 — JPA-совместимая база данных, поэтому мы добавим аннотации `JPA`, чтобы связать все в одно
        целое. В класс `Coffee` добавим аннотацию `@Entity` из `API javax.persistence`, которая показывает, что
        `Coffee` это сохраняемая сущность, а к переменной экземпляра `id` присоединим аннотацию `@Id` из
        `javax.persistence`, обозначив ее как поле идентификатора таблицы базы данных.

        *Если имя класса не соответствует нужному названию таблицы базы данных, вы
        можете задать имя таблицы, соответствующее аннотируемой сущности, с помощью
        параметра name аннотации `@Entity`.*

        Хорошая IDE обычно сообщает, что в классе Coffee все еще чего-то не хватает. К примеру, IntelliJ
        подчеркивает название класса красным и выводит всплывающее окно с полезной информацией,
        если вы наведете на него указатель мыши.

        ![](https://i.imgur.com/61U0oPz.png "Рис. 1")

        Для API Java Persistence при создании объектов из строк таблицы базы данных нужен конструктор
        без аргументов, так что добавим его в класс. В итоге получаем следующее предупреждение IDE:
        для конструктора без аргументов необходимо, чтобы все переменные экземпляра были
        изменяемыми, то есть не `final`.

        ![](https://i.imgur.com/LMpsGoJ.png "Рис. 2")

        Решить эту проблему поможет удаление ключевого слова `final` из объявления переменной
        экземпляра `id`. Однако для преобразования поля id в изменяемое потребуется метод-
        модификатор для `id` в классе `Coffee`, чтобы JPA мог присваивать ей значения, поэтому добавим
        метод `setId()`.

        ![](https://i.imgur.com/d8Ur8MX.png "Рис. 3")
    </markdown>
</slide>